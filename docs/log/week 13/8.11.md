## undo

- [ ] 日期配置更新
- [ ] dubbo 接口 禁止重试 调用方
- [x] 新增和更新积分的操作使用SQL
- [ ] 主键冲突update
- [ ] 排行加缓存
- [x] 测试环境定时任务测试



## problem



### 优化查询全国排行榜

1. 查询全国排行时从redis获取，获取不到则从MySQL获取
2. 更新排行榜表时更新缓存
3. 获取用户当前排名信息时从缓存获取



zset

actId:userId:week1score



zset 设置过期时间

### zset 无法根据时间排序

分数混合时间戳



任务调度，保证单机执行

## log

1. 排行榜奖励发放bug，期数不对，且奖励逻辑不对，修改完成



