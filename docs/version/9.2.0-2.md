## 920版本——我的、今选

### 需求清单

| 一级模块 | 二级模块               | 需求明细 | 时间    |
| -------- | ---------------------- | -------- | ------- |
| 我的相关 | 我的收藏               |          | 1       |
|          | 我的话题               |          | 0.5     |
|          | 我的活动               |          | 0.5     |
|          | 我的赞                 |          | 2       |
|          | 我的评论               |          | 1.5     |
|          | ~~我的浏览历史~~       |          | ~~2~~   |
|          | AT我                   |          | 1       |
| ~~今选~~ | ~~整体页面结构~~       |          | ~~0.5~~ |
|          | ~~banner位UI样式优化~~ |          | ~~0~~   |
|          | ~~应用UI样式优化~~     |          | ~~1~~   |
|          | ~~校内资讯样式优化~~   |          | ~~1~~   |



### 需要方案

赞



#### 我的话题

沿用旧接口

```
POST /app/content/crossTalk/square/listFollow HTTP/1.1
```

> 我关注的话题
>
> 取关直接删除
>
> 涉及表`cpdaily_content.t_cpdaily_cross_talk_follow`



#### 我的活动 （已取消）

- [ ] 签名校验逻辑

> 活动查询逻辑
>
> 根据用户id，租户id
>
> 先从用户记录表`t_activity_user_record`查询活动code
>
> 再筛选活动code，活动类型，活动状态为已发布
>
> 连表`t_activity` `t_activity_action_signup` 查询活动状态，报名状态

```json
POST /api/account/activity/info/myList
{
	"type": 4, // 0-全部；1-未开始；2-进行中；3-已结束；4-已取消
	"pageNumber": 1,
	"pageSize": 10,
	"appid": "ics_app",
	"timestamp": 1646032947157,
	"sign": "7a8ba01e75d7924aa116ae3df098602f"
}
```





## 群组

> 暂停上述需求，开始设计群组

### 表结构设计

> 共有字段 创建时间，更新时间，删除状态

#### 群基本信息表

| 群组id | 名称 | 类型 | 租户id | 权限模板id | 组件模板id | ...  |      |
| ------ | ---- | ---- | ------ | ---------- | ---------- | ---- | ---- |

#### 群成员表

|      | 群组id | 用户id | 用户类型 | 角色类型 | 角色id |      |      |
| ---- | ------ | ------ | -------- | -------- | ------ | ---- | ---- |

#### 群组权限模板表

| 权限模板id | 组长权限 | 管理员权限 | 普通成员权限 | 群通用权限1 | 群通用权限2 | ...  |      |
| ---------- | -------- | ---------- | ------------ | ----------- | ----------- | ---- | ---- |



### 现有权限系统表梳理

1. admin -> 管理员id，状态，用户id，personId
2. admin_role -> wid(角色管理员)，角色id，管理员id，生效业务类型，生效业务id
3. permission -> 权限id，权限类型，当前类型特有信息，父级权限id，业务类型，适配模式
4. permission_resource -> 权限资源关联表 权限id，资源id
5. resource -> 资源id，资源名称，资源类型（接口），资源值（接口地址）
6. role -> 角色id，父亲角色id，角色类型，业务类型，业务id，状态，角色可有数量
7. role_permission -> 角色权限关联表，角色id，权限id



### 群组开发

> 开始日期3.9

| 一级           | 二级              | 时间 |
| -------------- | ----------------- | ---- |
| 群组（管控台） | 群组管理          |      |
|                | 群组创建（批量）  |      |
|                | 群组创建（单个）  |      |
|                | 租户管理-群组配置 | 0.5  |

#### 群组创建

1. 基本信息
2. 成员权限
3. 群组配置 组件、群权限
