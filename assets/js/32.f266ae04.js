(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{395:function(v,_,t){"use strict";t.r(_);var a=t(44),l=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h2",{attrs:{id:"undo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#undo"}},[v._v("#")]),v._v(" undo")]),v._v(" "),t("ul",[t("li",[v._v("[x] 数据库冗余字段删除")]),v._v(" "),t("li",[v._v("[ ] 日期配置更新")]),v._v(" "),t("li",[v._v("[x] 日志")]),v._v(" "),t("li",[v._v("[x] 参数必传校验")]),v._v(" "),t("li",[v._v("[x] 积分表唯一索引 活动id 用户id")]),v._v(" "),t("li",[v._v("[ ] dubbo 接口 禁止重试 调用方")]),v._v(" "),t("li",[v._v("[x] 新增和更新积分的操作使用SQL")]),v._v(" "),t("li",[v._v("[ ] 主键冲突update")]),v._v(" "),t("li",[v._v("[x] 通过sql进行运算而不是Java")]),v._v(" "),t("li",[v._v("[x] 排行榜表加索引 三个分数")]),v._v(" "),t("li",[v._v("[ ] 排行加缓存")]),v._v(" "),t("li",[v._v("[x] 排行榜表租户id索引")]),v._v(" "),t("li",[v._v("[ ] 测试环境定时任务测试")])]),v._v(" "),t("h2",{attrs:{id:"problem"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#problem"}},[v._v("#")]),v._v(" problem")]),v._v(" "),t("p",[v._v("删了几个字段，好家伙接口全报错了，=="),t("strong",[v._v("对应的实体类属性也要删掉")]),v._v("==")]),v._v(" "),t("p",[v._v("zset 设置过期时间")]),v._v(" "),t("p",[v._v("zset 无法根据时间排序")]),v._v(" "),t("h3",{attrs:{id:"优化查询全国排行榜"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化查询全国排行榜"}},[v._v("#")]),v._v(" 优化查询全国排行榜")]),v._v(" "),t("ol",[t("li",[v._v("查询全国排行时从redis获取，获取不到则从MySQL获取")]),v._v(" "),t("li",[v._v("更新排行榜表时更新缓存")]),v._v(" "),t("li",[v._v("获取用户当前排名信息时从缓存获取")])]),v._v(" "),t("p",[v._v("zset")]),v._v(" "),t("p",[v._v("actId:userId:week1score")]),v._v(" "),t("h2",{attrs:{id:"log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[v._v("#")]),v._v(" log")])])}),[],!1,null,null,null);_.default=l.exports}}]);