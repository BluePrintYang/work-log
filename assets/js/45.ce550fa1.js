(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{405:function(s,t,a){"use strict";a.r(t);var e=a(44),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"undo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#undo"}},[s._v("#")]),s._v(" undo")]),s._v(" "),a("ul",[a("li",[s._v("[ ] 获取关注校园号")]),s._v(" "),a("li",[s._v("[ ] 网多云技术方案")])]),s._v(" "),a("h2",{attrs:{id:"problem"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#problem"}},[s._v("#")]),s._v(" problem")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/v7/api/campus/account/listAccountList?filter"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("FOLLOW"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pageSize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("keyword")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pageNum")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("oick")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("bbceb8d3\n")])])]),a("h3",{attrs:{id:"获取关注的校园号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取关注的校园号"}},[s._v("#")]),s._v(" 获取关注的校园号")]),s._v(" "),a("p",[s._v("campus-account项目")]),s._v(" "),a("p",[s._v("com.wisedu.wec.cpdaily.campus.web.controller.api.AccountApiController#listAccountList")]),s._v(" "),a("p",[s._v("调用AccountApiService#listAccountList")]),s._v(" "),a("ol",[a("li",[s._v("根据personId查询关注的校园号\n"),a("ol",[a("li",[s._v("设置type为校园号（2），personId")]),s._v(" "),a("li",[s._v("调用user-provider项目com.wisedu.wec.cpdaily.user.provider.biz.impl.CpdailyFansPersonServiceImpl#listFollowing")])])]),s._v(" "),a("li",[s._v("根据userId查询所属成员的校园号")])]),s._v(" "),a("p",[s._v("传入FOLLOW，过滤，不分页获取所有的")]),s._v(" "),a("p",[s._v("传入req包含userId")]),s._v(" "),a("p",[s._v("调用campus项目")]),s._v(" "),a("p",[s._v("com.wisedu.wec.cpdaily.campus.provider.CampusAccountApiImpl#listLogicFollowAccountIds")]),s._v(" "),a("p",[s._v("传入userId，req")]),s._v(" "),a("p",[s._v("调用CampusAccountServiceImpl#listLogicFollowAccount")]),s._v(" "),a("p",[s._v("传入pwid，type：2")]),s._v(" "),a("p",[s._v("调用user-provider项目")]),s._v(" "),a("p",[s._v("com.wisedu.wec.cpdaily.user.provider.biz.impl.CpdailyFansPersonServiceImpl#listFollowingByPwidAndKind")]),s._v(" "),a("p",[s._v("listLogicFollowAccount")]),s._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询校园号sql")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- cpdaily")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" pwid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" to_pwid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" kind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" visited_time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" area\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_cpdaily_person_follow\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" pwid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a7bd065e-9e0f-4d83-9846-1c5c55193ed5'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" kind "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" create_time "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询校级号        ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 根据租户id查询wid")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- cpdaily_account")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" account_wid\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_campus_material_school\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" tenant_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1019294240149685'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 根据wid查询校级号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_campus_account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" wid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" account_wid\n              "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_campus_material_school\n              "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" tenant_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1019294240149685'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" delete_flag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" org_type "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询存在的机构号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 获取授权信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- cpdaily_auth")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_cpdaily_users_auth\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" wid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a4a13b5c-1a2c-4e29-a178-1338ca6b8a3e'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 查询主认证（3个id学生）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("academy_Id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("major_Id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CLASS_ID\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_cpdaily_users_auth a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n     t_cpdaily_users_main_auth b\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wId "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auth_id\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c4f7a1ba-6d52-4d50-89e3-1da1b56496b5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 获取对应此租户对应的组织机构节点id请求")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- cpdaily")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" org_id\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_cpdaily_org\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" tenant_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1019294240149685'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" org_kind "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询存在的社团号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- cpdaily_")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_campus_account_member\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c4f7a1ba-6d52-4d50-89e3-1da1b56496b5'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 获取校园号列表根据热度排序")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- cpdaily_account")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" t_campus_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       IFNULL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t_campus_account_hot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" hot\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" t_campus_account\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEFT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" t_campus_account_hot "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" t_campus_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("account_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" t_campus_account_hot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("account_id\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" account_status "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ENABLE'")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" delete_flag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" open_status "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" org_type "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" instr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("t_campus_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'测试'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" t_campus_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("account_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3ef466ee-a2c9-4592-a27d-861ce1cbd071'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'a9f1f2fa-c815-4140-93b1-f92fc4f74263'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'c96120af-997d-4488-b195-453fee8f8f83'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'905c811c-835b-48a0-b8c2-7408fef8a6f2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n       "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cdcb6487-4ac1-4a69-94f2-ec4714887280'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" hot "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" create_time "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DESC")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n")])])]),a("h2",{attrs:{id:"log"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[s._v("#")]),s._v(" log")]),s._v(" "),a("ol",[a("li",[s._v("研究网多云")]),s._v(" "),a("li",[s._v("获取关注校园号")])]),s._v(" "),a("h2",{attrs:{id:"learn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#learn"}},[s._v("#")]),s._v(" learn")]),s._v(" "),a("h3",{attrs:{id:"查看日志搜索并查看后几行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看日志搜索并查看后几行"}},[s._v("#")]),s._v(" 查看日志搜索并查看后几行")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -A 后N行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -B 前N行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -C 前后N行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"排行榜前十名发放奖励"')]),s._v(" wec-cpdaily-activity.log -A "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);