(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{462:function(s,a,t){"use strict";t.r(a);var e=t(44),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#log"}},[s._v("#")]),s._v(" log")]),s._v(" "),t("ol",[t("li",[s._v("找站内信数据库cassandra")]),s._v(" "),t("li",[s._v("管理员转移不能点确定原因，严君是未认证用户")]),s._v(" "),t("li",[s._v("菜单权限控制")])]),s._v(" "),t("h3",{attrs:{id:"获取菜单"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取菜单"}},[s._v("#")]),s._v(" 获取菜单")]),s._v(" "),t("blockquote",[t("p",[s._v("请求：/account/menu/list-v8216?accountId=70f3d15d-ab7d-4a69-bb80-6e6b86abb0fc")]),s._v(" "),t("p",[s._v("项目：campus  数据库：cpdaily_authority")])]),s._v(" "),t("ol",[t("li",[t("p",[t("code",[s._v("userId")]),s._v("和"),t("code",[s._v("accountId")]),s._v("，"),t("code",[s._v('req.setBizType("account")')]),s._v("获取角色权限")])]),s._v(" "),t("li",[t("p",[s._v("根据"),t("code",[s._v("userId")]),s._v("获取管理员角色id")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_authority_admin "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" user_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("查询管理员角色")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_authority_admin_role\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" affect_biz_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" affect_biz_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" admin_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("获取上面查询的roleIds")])]),s._v(" "),t("li",[t("p",[s._v("根据roleIds获取角色权限id")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_authority_role_permission "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" role_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("获取上面的权限id")])]),s._v(" "),t("li",[t("p",[s._v("获取权限")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_authority_permission "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" permission_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("in")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("按照排序值"),t("code",[s._v("sortNo")]),s._v("排序，按照"),t("code",[s._v("parentId")]),s._v("分组")])])]),s._v(" "),t("h2",{attrs:{id:"learn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#learn"}},[s._v("#")]),s._v(" learn")]),s._v(" "),t("h3",{attrs:{id:"cassandra查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cassandra查询"}},[s._v("#")]),s._v(" cassandra查询")]),s._v(" "),t("div",{staticClass:"language-sql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" t_cpdaily_inner_msg_person "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" ctime "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2021-10-01'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" title "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'修改用户信息通知'")]),s._v(" ALLOW FILTERING "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);